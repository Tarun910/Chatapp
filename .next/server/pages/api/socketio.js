"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/socketio";
exports.ids = ["pages/api/socketio"];
exports.modules = {

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "winston":
/*!**************************!*\
  !*** external "winston" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("winston");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "socket.io":
/*!****************************!*\
  !*** external "socket.io" ***!
  \****************************/
/***/ ((module) => {

module.exports = import("socket.io");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsocketio&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsocketio.js&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsocketio&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsocketio.js&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_socketio_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/socketio.js */ \"(api)/./pages/api/socketio.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_socketio_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_socketio_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_socketio_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_socketio_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/socketio\",\n        pathname: \"/api/socketio\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_socketio_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnNvY2tldGlvJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZzb2NrZXRpby5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNvRDtBQUNwRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsbURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLG1EQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtcmVhbHRpbWUtY2hhdC8/MDk5YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL3NvY2tldGlvLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc29ja2V0aW9cIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zb2NrZXRpb1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsocketio&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsocketio.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./config/logger.js":
/*!**************************!*\
  !*** ./config/logger.js ***!
  \**************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst winston = __webpack_require__(/*! winston */ \"winston\");\nconst fs = __webpack_require__(/*! fs */ \"fs\");\nconst path = __webpack_require__(/*! path */ \"path\");\n// Create logs directory if it doesn't exist\nconst logsDir = path.join(__dirname, \"..\", \"logs\");\nif (!fs.existsSync(logsDir)) {\n    fs.mkdirSync(logsDir, {\n        recursive: true\n    });\n}\nconst logger = winston.createLogger({\n    level: process.env.LOG_LEVEL || \"info\",\n    format: winston.format.combine(winston.format.timestamp({\n        format: \"YYYY-MM-DD HH:mm:ss\"\n    }), winston.format.errors({\n        stack: true\n    }), winston.format.splat(), winston.format.json()),\n    defaultMeta: {\n        service: \"chat-application\"\n    },\n    transports: [\n        new winston.transports.File({\n            filename: \"logs/error.log\",\n            level: \"error\"\n        }),\n        new winston.transports.File({\n            filename: \"logs/combined.log\"\n        })\n    ]\n});\nif (true) {\n    logger.add(new winston.transports.Console({\n        format: winston.format.combine(winston.format.colorize(), winston.format.simple())\n    }));\n}\nmodule.exports = logger;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9jb25maWcvbG9nZ2VyLmpzIiwibWFwcGluZ3MiOiI7QUFBQSxNQUFNQSxVQUFVQyxtQkFBT0EsQ0FBQztBQUN4QixNQUFNQyxLQUFLRCxtQkFBT0EsQ0FBQztBQUNuQixNQUFNRSxPQUFPRixtQkFBT0EsQ0FBQztBQUVyQiw0Q0FBNEM7QUFDNUMsTUFBTUcsVUFBVUQsS0FBS0UsSUFBSSxDQUFDQyxXQUFXLE1BQU07QUFDM0MsSUFBSSxDQUFDSixHQUFHSyxVQUFVLENBQUNILFVBQVU7SUFDM0JGLEdBQUdNLFNBQVMsQ0FBQ0osU0FBUztRQUFFSyxXQUFXO0lBQUs7QUFDMUM7QUFFQSxNQUFNQyxTQUFTVixRQUFRVyxZQUFZLENBQUM7SUFDbENDLE9BQU9DLFFBQVFDLEdBQUcsQ0FBQ0MsU0FBUyxJQUFJO0lBQ2hDQyxRQUFRaEIsUUFBUWdCLE1BQU0sQ0FBQ0MsT0FBTyxDQUM1QmpCLFFBQVFnQixNQUFNLENBQUNFLFNBQVMsQ0FBQztRQUFFRixRQUFRO0lBQXNCLElBQ3pEaEIsUUFBUWdCLE1BQU0sQ0FBQ0csTUFBTSxDQUFDO1FBQUVDLE9BQU87SUFBSyxJQUNwQ3BCLFFBQVFnQixNQUFNLENBQUNLLEtBQUssSUFDcEJyQixRQUFRZ0IsTUFBTSxDQUFDTSxJQUFJO0lBRXJCQyxhQUFhO1FBQUVDLFNBQVM7SUFBbUI7SUFDM0NDLFlBQVk7UUFDVixJQUFJekIsUUFBUXlCLFVBQVUsQ0FBQ0MsSUFBSSxDQUFDO1lBQUVDLFVBQVU7WUFBa0JmLE9BQU87UUFBUTtRQUN6RSxJQUFJWixRQUFReUIsVUFBVSxDQUFDQyxJQUFJLENBQUM7WUFBRUMsVUFBVTtRQUFvQjtLQUM3RDtBQUNIO0FBRUEsSUFBSWQsSUFBeUIsRUFBYztJQUN6Q0gsT0FBT2tCLEdBQUcsQ0FDUixJQUFJNUIsUUFBUXlCLFVBQVUsQ0FBQ0ksT0FBTyxDQUFDO1FBQzdCYixRQUFRaEIsUUFBUWdCLE1BQU0sQ0FBQ0MsT0FBTyxDQUM1QmpCLFFBQVFnQixNQUFNLENBQUNjLFFBQVEsSUFDdkI5QixRQUFRZ0IsTUFBTSxDQUFDZSxNQUFNO0lBRXpCO0FBRUo7QUFFQUMsT0FBT0MsT0FBTyxHQUFHdkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LXJlYWx0aW1lLWNoYXQvLi9jb25maWcvbG9nZ2VyLmpzP2YxMTMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgd2luc3RvbiA9IHJlcXVpcmUoJ3dpbnN0b24nKTtcbmNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbi8vIENyZWF0ZSBsb2dzIGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0XG5jb25zdCBsb2dzRGlyID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uJywgJ2xvZ3MnKTtcbmlmICghZnMuZXhpc3RzU3luYyhsb2dzRGlyKSkge1xuICBmcy5ta2RpclN5bmMobG9nc0RpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG59XG5cbmNvbnN0IGxvZ2dlciA9IHdpbnN0b24uY3JlYXRlTG9nZ2VyKHtcbiAgbGV2ZWw6IHByb2Nlc3MuZW52LkxPR19MRVZFTCB8fCAnaW5mbycsXG4gIGZvcm1hdDogd2luc3Rvbi5mb3JtYXQuY29tYmluZShcbiAgICB3aW5zdG9uLmZvcm1hdC50aW1lc3RhbXAoeyBmb3JtYXQ6ICdZWVlZLU1NLUREIEhIOm1tOnNzJyB9KSxcbiAgICB3aW5zdG9uLmZvcm1hdC5lcnJvcnMoeyBzdGFjazogdHJ1ZSB9KSxcbiAgICB3aW5zdG9uLmZvcm1hdC5zcGxhdCgpLFxuICAgIHdpbnN0b24uZm9ybWF0Lmpzb24oKVxuICApLFxuICBkZWZhdWx0TWV0YTogeyBzZXJ2aWNlOiAnY2hhdC1hcHBsaWNhdGlvbicgfSxcbiAgdHJhbnNwb3J0czogW1xuICAgIG5ldyB3aW5zdG9uLnRyYW5zcG9ydHMuRmlsZSh7IGZpbGVuYW1lOiAnbG9ncy9lcnJvci5sb2cnLCBsZXZlbDogJ2Vycm9yJyB9KSxcbiAgICBuZXcgd2luc3Rvbi50cmFuc3BvcnRzLkZpbGUoeyBmaWxlbmFtZTogJ2xvZ3MvY29tYmluZWQubG9nJyB9KSxcbiAgXSxcbn0pO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBsb2dnZXIuYWRkKFxuICAgIG5ldyB3aW5zdG9uLnRyYW5zcG9ydHMuQ29uc29sZSh7XG4gICAgICBmb3JtYXQ6IHdpbnN0b24uZm9ybWF0LmNvbWJpbmUoXG4gICAgICAgIHdpbnN0b24uZm9ybWF0LmNvbG9yaXplKCksXG4gICAgICAgIHdpbnN0b24uZm9ybWF0LnNpbXBsZSgpXG4gICAgICApLFxuICAgIH0pXG4gICk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbG9nZ2VyO1xuXG4iXSwibmFtZXMiOlsid2luc3RvbiIsInJlcXVpcmUiLCJmcyIsInBhdGgiLCJsb2dzRGlyIiwiam9pbiIsIl9fZGlybmFtZSIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJsb2dnZXIiLCJjcmVhdGVMb2dnZXIiLCJsZXZlbCIsInByb2Nlc3MiLCJlbnYiLCJMT0dfTEVWRUwiLCJmb3JtYXQiLCJjb21iaW5lIiwidGltZXN0YW1wIiwiZXJyb3JzIiwic3RhY2siLCJzcGxhdCIsImpzb24iLCJkZWZhdWx0TWV0YSIsInNlcnZpY2UiLCJ0cmFuc3BvcnRzIiwiRmlsZSIsImZpbGVuYW1lIiwiYWRkIiwiQ29uc29sZSIsImNvbG9yaXplIiwic2ltcGxlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./config/logger.js\n");

/***/ }),

/***/ "(api)/./lib/mongoose.js":
/*!*************************!*\
  !*** ./lib/mongoose.js ***!
  \*************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function connectDB() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const uri = process.env.MONGODB_URI;\n        if (!uri) {\n            throw new Error(\"MONGODB_URI is required. Please set it in your environment variables.\");\n        }\n        cached.promise = mongoose.connect(uri, {\n            bufferCommands: false\n        }).then((mongooseInstance)=>mongooseInstance);\n    }\n    cached.conn = await cached.promise;\n    return cached.conn;\n}\nmodule.exports = connectDB;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbW9uZ29vc2UuanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU1BLFdBQVdDLG1CQUFPQSxDQUFDO0FBRXpCLElBQUlDLFNBQVNDLE9BQU9ILFFBQVE7QUFFNUIsSUFBSSxDQUFDRSxRQUFRO0lBQ1hBLFNBQVNDLE9BQU9ILFFBQVEsR0FBRztRQUFFSSxNQUFNO1FBQU1DLFNBQVM7SUFBSztBQUN6RDtBQUVBLGVBQWVDO0lBQ2IsSUFBSUosT0FBT0UsSUFBSSxFQUFFO1FBQ2YsT0FBT0YsT0FBT0UsSUFBSTtJQUNwQjtJQUVBLElBQUksQ0FBQ0YsT0FBT0csT0FBTyxFQUFFO1FBQ25CLE1BQU1FLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MsV0FBVztRQUNuQyxJQUFJLENBQUNILEtBQUs7WUFDUixNQUFNLElBQUlJLE1BQU07UUFDbEI7UUFDQVQsT0FBT0csT0FBTyxHQUFHTCxTQUFTWSxPQUFPLENBQUNMLEtBQUs7WUFBRU0sZ0JBQWdCO1FBQU0sR0FBR0MsSUFBSSxDQUFDLENBQUNDLG1CQUFxQkE7SUFDL0Y7SUFFQWIsT0FBT0UsSUFBSSxHQUFHLE1BQU1GLE9BQU9HLE9BQU87SUFDbEMsT0FBT0gsT0FBT0UsSUFBSTtBQUNwQjtBQUVBWSxPQUFPQyxPQUFPLEdBQUdYIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1yZWFsdGltZS1jaGF0Ly4vbGliL21vbmdvb3NlLmpzPzE2M2QiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuXG5sZXQgY2FjaGVkID0gZ2xvYmFsLm1vbmdvb3NlO1xuXG5pZiAoIWNhY2hlZCkge1xuICBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2UgPSB7IGNvbm46IG51bGwsIHByb21pc2U6IG51bGwgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY29ubmVjdERCKCkge1xuICBpZiAoY2FjaGVkLmNvbm4pIHtcbiAgICByZXR1cm4gY2FjaGVkLmNvbm47XG4gIH1cblxuICBpZiAoIWNhY2hlZC5wcm9taXNlKSB7XG4gICAgY29uc3QgdXJpID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkk7XG4gICAgaWYgKCF1cmkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTU9OR09EQl9VUkkgaXMgcmVxdWlyZWQuIFBsZWFzZSBzZXQgaXQgaW4geW91ciBlbnZpcm9ubWVudCB2YXJpYWJsZXMuJyk7XG4gICAgfVxuICAgIGNhY2hlZC5wcm9taXNlID0gbW9uZ29vc2UuY29ubmVjdCh1cmksIHsgYnVmZmVyQ29tbWFuZHM6IGZhbHNlIH0pLnRoZW4oKG1vbmdvb3NlSW5zdGFuY2UpID0+IG1vbmdvb3NlSW5zdGFuY2UpO1xuICB9XG5cbiAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZTtcbiAgcmV0dXJuIGNhY2hlZC5jb25uO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbm5lY3REQjtcblxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsImNhY2hlZCIsImdsb2JhbCIsImNvbm4iLCJwcm9taXNlIiwiY29ubmVjdERCIiwidXJpIiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIiwiRXJyb3IiLCJjb25uZWN0IiwiYnVmZmVyQ29tbWFuZHMiLCJ0aGVuIiwibW9uZ29vc2VJbnN0YW5jZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/mongoose.js\n");

/***/ }),

/***/ "(api)/./middleware/auth.js":
/*!****************************!*\
  !*** ./middleware/auth.js ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst jwt = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\nconst User = __webpack_require__(/*! ../models/User */ \"(api)/./models/User.js\");\nconst logger = __webpack_require__(/*! ../config/logger */ \"(api)/./config/logger.js\");\nconst buildError = (status, message)=>{\n    const error = new Error(message);\n    error.status = status;\n    return error;\n};\nconst verifyToken = async (token)=>{\n    if (!token) {\n        throw buildError(401, \"Access token required\");\n    }\n    let decoded;\n    try {\n        decoded = jwt.verify(token, process.env.JWT_SECRET);\n    } catch (error) {\n        if (error.name === \"TokenExpiredError\") {\n            throw buildError(401, \"Token expired\");\n        }\n        throw buildError(401, \"Invalid token\");\n    }\n    const user = await User.findById(decoded.userId).select(\"-password\");\n    if (!user) {\n        throw buildError(401, \"User not found\");\n    }\n    return user;\n};\nconst getUserFromHeaders = async (headers)=>{\n    const headerValue = typeof headers?.get === \"function\" ? headers.get(\"authorization\") : headers?.authorization || headers?.Authorization;\n    const token = headerValue?.split(\" \")[1];\n    return verifyToken(token);\n};\n// Middleware to verify JWT token for Socket.io connections\nconst authenticateSocket = async (socket, next)=>{\n    try {\n        const token = socket.handshake.auth.token || socket.handshake.headers.authorization?.split(\" \")[1];\n        const user = await verifyToken(token);\n        socket.userId = user._id.toString();\n        socket.username = user.username;\n        next();\n    } catch (error) {\n        logger.error(\"Socket authentication error:\", error);\n        if (error.name === \"JsonWebTokenError\") {\n            return next(new Error(\"Authentication error: Invalid token\"));\n        }\n        if (error.name === \"TokenExpiredError\") {\n            return next(new Error(\"Authentication error: Token expired\"));\n        }\n        const message = error.status === 401 ? error.message : \"Authentication error: Authentication failed\";\n        next(new Error(message));\n    }\n};\nmodule.exports = {\n    getUserFromHeaders,\n    authenticateSocket\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9taWRkbGV3YXJlL2F1dGguanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU1BLE1BQU1DLG1CQUFPQSxDQUFDO0FBQ3BCLE1BQU1DLE9BQU9ELG1CQUFPQSxDQUFDO0FBQ3JCLE1BQU1FLFNBQVNGLG1CQUFPQSxDQUFDO0FBRXZCLE1BQU1HLGFBQWEsQ0FBQ0MsUUFBUUM7SUFDMUIsTUFBTUMsUUFBUSxJQUFJQyxNQUFNRjtJQUN4QkMsTUFBTUYsTUFBTSxHQUFHQTtJQUNmLE9BQU9FO0FBQ1Q7QUFFQSxNQUFNRSxjQUFjLE9BQU9DO0lBQ3pCLElBQUksQ0FBQ0EsT0FBTztRQUNWLE1BQU1OLFdBQVcsS0FBSztJQUN4QjtJQUVBLElBQUlPO0lBQ0osSUFBSTtRQUNGQSxVQUFVWCxJQUFJWSxNQUFNLENBQUNGLE9BQU9HLFFBQVFDLEdBQUcsQ0FBQ0MsVUFBVTtJQUNwRCxFQUFFLE9BQU9SLE9BQU87UUFDZCxJQUFJQSxNQUFNUyxJQUFJLEtBQUsscUJBQXFCO1lBQ3RDLE1BQU1aLFdBQVcsS0FBSztRQUN4QjtRQUNBLE1BQU1BLFdBQVcsS0FBSztJQUN4QjtJQUVBLE1BQU1hLE9BQU8sTUFBTWYsS0FBS2dCLFFBQVEsQ0FBQ1AsUUFBUVEsTUFBTSxFQUFFQyxNQUFNLENBQUM7SUFFeEQsSUFBSSxDQUFDSCxNQUFNO1FBQ1QsTUFBTWIsV0FBVyxLQUFLO0lBQ3hCO0lBRUEsT0FBT2E7QUFDVDtBQUVBLE1BQU1JLHFCQUFxQixPQUFPQztJQUNoQyxNQUFNQyxjQUNKLE9BQU9ELFNBQVNFLFFBQVEsYUFDcEJGLFFBQVFFLEdBQUcsQ0FBQyxtQkFDWkYsU0FBU0csaUJBQWlCSCxTQUFTSTtJQUN6QyxNQUFNaEIsUUFBUWEsYUFBYUksTUFBTSxJQUFJLENBQUMsRUFBRTtJQUN4QyxPQUFPbEIsWUFBWUM7QUFDckI7QUFFQSwyREFBMkQ7QUFDM0QsTUFBTWtCLHFCQUFxQixPQUFPQyxRQUFRQztJQUN4QyxJQUFJO1FBQ0YsTUFBTXBCLFFBQ0ptQixPQUFPRSxTQUFTLENBQUNDLElBQUksQ0FBQ3RCLEtBQUssSUFBSW1CLE9BQU9FLFNBQVMsQ0FBQ1QsT0FBTyxDQUFDRyxhQUFhLEVBQUVFLE1BQU0sSUFBSSxDQUFDLEVBQUU7UUFFdEYsTUFBTVYsT0FBTyxNQUFNUixZQUFZQztRQUUvQm1CLE9BQU9WLE1BQU0sR0FBR0YsS0FBS2dCLEdBQUcsQ0FBQ0MsUUFBUTtRQUNqQ0wsT0FBT00sUUFBUSxHQUFHbEIsS0FBS2tCLFFBQVE7UUFDL0JMO0lBQ0YsRUFBRSxPQUFPdkIsT0FBTztRQUNkSixPQUFPSSxLQUFLLENBQUMsZ0NBQWdDQTtRQUM3QyxJQUFJQSxNQUFNUyxJQUFJLEtBQUsscUJBQXFCO1lBQ3RDLE9BQU9jLEtBQUssSUFBSXRCLE1BQU07UUFDeEI7UUFDQSxJQUFJRCxNQUFNUyxJQUFJLEtBQUsscUJBQXFCO1lBQ3RDLE9BQU9jLEtBQUssSUFBSXRCLE1BQU07UUFDeEI7UUFDQSxNQUFNRixVQUFVQyxNQUFNRixNQUFNLEtBQUssTUFBTUUsTUFBTUQsT0FBTyxHQUFHO1FBQ3ZEd0IsS0FBSyxJQUFJdEIsTUFBTUY7SUFDakI7QUFDRjtBQUVBOEIsT0FBT0MsT0FBTyxHQUFHO0lBQ2ZoQjtJQUNBTztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dC1yZWFsdGltZS1jaGF0Ly4vbWlkZGxld2FyZS9hdXRoLmpzPzFjOWMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7XG5jb25zdCBVc2VyID0gcmVxdWlyZSgnLi4vbW9kZWxzL1VzZXInKTtcbmNvbnN0IGxvZ2dlciA9IHJlcXVpcmUoJy4uL2NvbmZpZy9sb2dnZXInKTtcblxuY29uc3QgYnVpbGRFcnJvciA9IChzdGF0dXMsIG1lc3NhZ2UpID0+IHtcbiAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIGVycm9yLnN0YXR1cyA9IHN0YXR1cztcbiAgcmV0dXJuIGVycm9yO1xufTtcblxuY29uc3QgdmVyaWZ5VG9rZW4gPSBhc3luYyAodG9rZW4pID0+IHtcbiAgaWYgKCF0b2tlbikge1xuICAgIHRocm93IGJ1aWxkRXJyb3IoNDAxLCAnQWNjZXNzIHRva2VuIHJlcXVpcmVkJyk7XG4gIH1cblxuICBsZXQgZGVjb2RlZDtcbiAgdHJ5IHtcbiAgICBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdUb2tlbkV4cGlyZWRFcnJvcicpIHtcbiAgICAgIHRocm93IGJ1aWxkRXJyb3IoNDAxLCAnVG9rZW4gZXhwaXJlZCcpO1xuICAgIH1cbiAgICB0aHJvdyBidWlsZEVycm9yKDQwMSwgJ0ludmFsaWQgdG9rZW4nKTtcbiAgfVxuXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKGRlY29kZWQudXNlcklkKS5zZWxlY3QoJy1wYXNzd29yZCcpO1xuXG4gIGlmICghdXNlcikge1xuICAgIHRocm93IGJ1aWxkRXJyb3IoNDAxLCAnVXNlciBub3QgZm91bmQnKTtcbiAgfVxuXG4gIHJldHVybiB1c2VyO1xufTtcblxuY29uc3QgZ2V0VXNlckZyb21IZWFkZXJzID0gYXN5bmMgKGhlYWRlcnMpID0+IHtcbiAgY29uc3QgaGVhZGVyVmFsdWUgPVxuICAgIHR5cGVvZiBoZWFkZXJzPy5nZXQgPT09ICdmdW5jdGlvbidcbiAgICAgID8gaGVhZGVycy5nZXQoJ2F1dGhvcml6YXRpb24nKVxuICAgICAgOiBoZWFkZXJzPy5hdXRob3JpemF0aW9uIHx8IGhlYWRlcnM/LkF1dGhvcml6YXRpb247XG4gIGNvbnN0IHRva2VuID0gaGVhZGVyVmFsdWU/LnNwbGl0KCcgJylbMV07XG4gIHJldHVybiB2ZXJpZnlUb2tlbih0b2tlbik7XG59O1xuXG4vLyBNaWRkbGV3YXJlIHRvIHZlcmlmeSBKV1QgdG9rZW4gZm9yIFNvY2tldC5pbyBjb25uZWN0aW9uc1xuY29uc3QgYXV0aGVudGljYXRlU29ja2V0ID0gYXN5bmMgKHNvY2tldCwgbmV4dCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHRva2VuID1cbiAgICAgIHNvY2tldC5oYW5kc2hha2UuYXV0aC50b2tlbiB8fCBzb2NrZXQuaGFuZHNoYWtlLmhlYWRlcnMuYXV0aG9yaXphdGlvbj8uc3BsaXQoJyAnKVsxXTtcblxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB2ZXJpZnlUb2tlbih0b2tlbik7XG5cbiAgICBzb2NrZXQudXNlcklkID0gdXNlci5faWQudG9TdHJpbmcoKTtcbiAgICBzb2NrZXQudXNlcm5hbWUgPSB1c2VyLnVzZXJuYW1lO1xuICAgIG5leHQoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dnZXIuZXJyb3IoJ1NvY2tldCBhdXRoZW50aWNhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdKc29uV2ViVG9rZW5FcnJvcicpIHtcbiAgICAgIHJldHVybiBuZXh0KG5ldyBFcnJvcignQXV0aGVudGljYXRpb24gZXJyb3I6IEludmFsaWQgdG9rZW4nKSk7XG4gICAgfVxuICAgIGlmIChlcnJvci5uYW1lID09PSAnVG9rZW5FeHBpcmVkRXJyb3InKSB7XG4gICAgICByZXR1cm4gbmV4dChuZXcgRXJyb3IoJ0F1dGhlbnRpY2F0aW9uIGVycm9yOiBUb2tlbiBleHBpcmVkJykpO1xuICAgIH1cbiAgICBjb25zdCBtZXNzYWdlID0gZXJyb3Iuc3RhdHVzID09PSA0MDEgPyBlcnJvci5tZXNzYWdlIDogJ0F1dGhlbnRpY2F0aW9uIGVycm9yOiBBdXRoZW50aWNhdGlvbiBmYWlsZWQnO1xuICAgIG5leHQobmV3IEVycm9yKG1lc3NhZ2UpKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdldFVzZXJGcm9tSGVhZGVycyxcbiAgYXV0aGVudGljYXRlU29ja2V0LFxufTtcblxuIl0sIm5hbWVzIjpbImp3dCIsInJlcXVpcmUiLCJVc2VyIiwibG9nZ2VyIiwiYnVpbGRFcnJvciIsInN0YXR1cyIsIm1lc3NhZ2UiLCJlcnJvciIsIkVycm9yIiwidmVyaWZ5VG9rZW4iLCJ0b2tlbiIsImRlY29kZWQiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiSldUX1NFQ1JFVCIsIm5hbWUiLCJ1c2VyIiwiZmluZEJ5SWQiLCJ1c2VySWQiLCJzZWxlY3QiLCJnZXRVc2VyRnJvbUhlYWRlcnMiLCJoZWFkZXJzIiwiaGVhZGVyVmFsdWUiLCJnZXQiLCJhdXRob3JpemF0aW9uIiwiQXV0aG9yaXphdGlvbiIsInNwbGl0IiwiYXV0aGVudGljYXRlU29ja2V0Iiwic29ja2V0IiwibmV4dCIsImhhbmRzaGFrZSIsImF1dGgiLCJfaWQiLCJ0b1N0cmluZyIsInVzZXJuYW1lIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./middleware/auth.js\n");

/***/ }),

/***/ "(api)/./models/Message.js":
/*!***************************!*\
  !*** ./models/Message.js ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\nconst messageSchema = new mongoose.Schema({\n    sender: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: \"User\",\n        required: true\n    },\n    receiver: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: \"User\",\n        required: true\n    },\n    content: {\n        type: String,\n        required: [\n            true,\n            \"Message content is required\"\n        ],\n        trim: true,\n        maxlength: [\n            1000,\n            \"Message cannot exceed 1000 characters\"\n        ]\n    },\n    read: {\n        type: Boolean,\n        default: false\n    },\n    readAt: {\n        type: Date\n    }\n}, {\n    timestamps: true\n});\n// Index for efficient querying of messages between two users\nmessageSchema.index({\n    sender: 1,\n    receiver: 1,\n    createdAt: -1\n});\nmessageSchema.index({\n    receiver: 1,\n    sender: 1,\n    createdAt: -1\n});\nmodule.exports = mongoose.models.Message || mongoose.model(\"Message\", messageSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvTWVzc2FnZS5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsTUFBTUEsV0FBV0MsbUJBQU9BLENBQUM7QUFFekIsTUFBTUMsZ0JBQWdCLElBQUlGLFNBQVNHLE1BQU0sQ0FDdkM7SUFDRUMsUUFBUTtRQUNOQyxNQUFNTCxTQUFTRyxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtRQUNwQ0MsS0FBSztRQUNMQyxVQUFVO0lBQ1o7SUFDQUMsVUFBVTtRQUNSTCxNQUFNTCxTQUFTRyxNQUFNLENBQUNHLEtBQUssQ0FBQ0MsUUFBUTtRQUNwQ0MsS0FBSztRQUNMQyxVQUFVO0lBQ1o7SUFDQUUsU0FBUztRQUNQTixNQUFNTztRQUNOSCxVQUFVO1lBQUM7WUFBTTtTQUE4QjtRQUMvQ0ksTUFBTTtRQUNOQyxXQUFXO1lBQUM7WUFBTTtTQUF3QztJQUM1RDtJQUNBQyxNQUFNO1FBQ0pWLE1BQU1XO1FBQ05DLFNBQVM7SUFDWDtJQUNBQyxRQUFRO1FBQ05iLE1BQU1jO0lBQ1I7QUFDRixHQUNBO0lBQ0VDLFlBQVk7QUFDZDtBQUdGLDZEQUE2RDtBQUM3RGxCLGNBQWNtQixLQUFLLENBQUM7SUFBRWpCLFFBQVE7SUFBR00sVUFBVTtJQUFHWSxXQUFXLENBQUM7QUFBRTtBQUM1RHBCLGNBQWNtQixLQUFLLENBQUM7SUFBRVgsVUFBVTtJQUFHTixRQUFRO0lBQUdrQixXQUFXLENBQUM7QUFBRTtBQUU1REMsT0FBT0MsT0FBTyxHQUFHeEIsU0FBU3lCLE1BQU0sQ0FBQ0MsT0FBTyxJQUFJMUIsU0FBUzJCLEtBQUssQ0FBQyxXQUFXekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LXJlYWx0aW1lLWNoYXQvLi9tb2RlbHMvTWVzc2FnZS5qcz8xN2EyIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcblxuY29uc3QgbWVzc2FnZVNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXG4gIHtcbiAgICBzZW5kZXI6IHtcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcbiAgICAgIHJlZjogJ1VzZXInLFxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgfSxcbiAgICByZWNlaXZlcjoge1xuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxuICAgICAgcmVmOiAnVXNlcicsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICAgIGNvbnRlbnQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ01lc3NhZ2UgY29udGVudCBpcyByZXF1aXJlZCddLFxuICAgICAgdHJpbTogdHJ1ZSxcbiAgICAgIG1heGxlbmd0aDogWzEwMDAsICdNZXNzYWdlIGNhbm5vdCBleGNlZWQgMTAwMCBjaGFyYWN0ZXJzJ10sXG4gICAgfSxcbiAgICByZWFkOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgfSxcbiAgICByZWFkQXQ6IHtcbiAgICAgIHR5cGU6IERhdGUsXG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gIH1cbik7XG5cbi8vIEluZGV4IGZvciBlZmZpY2llbnQgcXVlcnlpbmcgb2YgbWVzc2FnZXMgYmV0d2VlbiB0d28gdXNlcnNcbm1lc3NhZ2VTY2hlbWEuaW5kZXgoeyBzZW5kZXI6IDEsIHJlY2VpdmVyOiAxLCBjcmVhdGVkQXQ6IC0xIH0pO1xubWVzc2FnZVNjaGVtYS5pbmRleCh7IHJlY2VpdmVyOiAxLCBzZW5kZXI6IDEsIGNyZWF0ZWRBdDogLTEgfSk7XG5cbm1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWxzLk1lc3NhZ2UgfHwgbW9uZ29vc2UubW9kZWwoJ01lc3NhZ2UnLCBtZXNzYWdlU2NoZW1hKTtcblxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsIm1lc3NhZ2VTY2hlbWEiLCJTY2hlbWEiLCJzZW5kZXIiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwicmVjZWl2ZXIiLCJjb250ZW50IiwiU3RyaW5nIiwidHJpbSIsIm1heGxlbmd0aCIsInJlYWQiLCJCb29sZWFuIiwiZGVmYXVsdCIsInJlYWRBdCIsIkRhdGUiLCJ0aW1lc3RhbXBzIiwiaW5kZXgiLCJjcmVhdGVkQXQiLCJtb2R1bGUiLCJleHBvcnRzIiwibW9kZWxzIiwiTWVzc2FnZSIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./models/Message.js\n");

/***/ }),

/***/ "(api)/./models/User.js":
/*!************************!*\
  !*** ./models/User.js ***!
  \************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\nconst bcrypt = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\nconst userSchema = new mongoose.Schema({\n    username: {\n        type: String,\n        required: [\n            true,\n            \"Username is required\"\n        ],\n        unique: true,\n        trim: true,\n        minlength: [\n            3,\n            \"Username must be at least 3 characters\"\n        ],\n        maxlength: [\n            30,\n            \"Username cannot exceed 30 characters\"\n        ]\n    },\n    password: {\n        type: String,\n        required: [\n            true,\n            \"Password is required\"\n        ],\n        minlength: [\n            6,\n            \"Password must be at least 6 characters\"\n        ],\n        select: false\n    },\n    status: {\n        type: String,\n        enum: [\n            \"online\",\n            \"offline\"\n        ],\n        default: \"offline\"\n    },\n    lastSeen: {\n        type: Date,\n        default: Date.now\n    }\n}, {\n    timestamps: true\n});\n// Hash password before saving\nuserSchema.pre(\"save\", async function(next) {\n    if (!this.isModified(\"password\")) {\n        return next();\n    }\n    const salt = await bcrypt.genSalt(10);\n    this.password = await bcrypt.hash(this.password, salt);\n    next();\n});\n// Method to compare password\nuserSchema.methods.comparePassword = async function(candidatePassword) {\n    return await bcrypt.compare(candidatePassword, this.password);\n};\n// Remove password from JSON output\nuserSchema.methods.toJSON = function() {\n    const userObject = this.toObject();\n    delete userObject.password;\n    return userObject;\n};\nmodule.exports = mongoose.models.User || mongoose.model(\"User\", userSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvVXNlci5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsTUFBTUEsV0FBV0MsbUJBQU9BLENBQUM7QUFDekIsTUFBTUMsU0FBU0QsbUJBQU9BLENBQUM7QUFFdkIsTUFBTUUsYUFBYSxJQUFJSCxTQUFTSSxNQUFNLENBQ3BDO0lBQ0VDLFVBQVU7UUFDUkMsTUFBTUM7UUFDTkMsVUFBVTtZQUFDO1lBQU07U0FBdUI7UUFDeENDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxXQUFXO1lBQUM7WUFBRztTQUF5QztRQUN4REMsV0FBVztZQUFDO1lBQUk7U0FBdUM7SUFDekQ7SUFDQUMsVUFBVTtRQUNSUCxNQUFNQztRQUNOQyxVQUFVO1lBQUM7WUFBTTtTQUF1QjtRQUN4Q0csV0FBVztZQUFDO1lBQUc7U0FBeUM7UUFDeERHLFFBQVE7SUFDVjtJQUNBQyxRQUFRO1FBQ05ULE1BQU1DO1FBQ05TLE1BQU07WUFBQztZQUFVO1NBQVU7UUFDM0JDLFNBQVM7SUFDWDtJQUNBQyxVQUFVO1FBQ1JaLE1BQU1hO1FBQ05GLFNBQVNFLEtBQUtDLEdBQUc7SUFDbkI7QUFDRixHQUNBO0lBQ0VDLFlBQVk7QUFDZDtBQUdGLDhCQUE4QjtBQUM5QmxCLFdBQVdtQixHQUFHLENBQUMsUUFBUSxlQUFnQkMsSUFBSTtJQUN6QyxJQUFJLENBQUMsSUFBSSxDQUFDQyxVQUFVLENBQUMsYUFBYTtRQUNoQyxPQUFPRDtJQUNUO0lBQ0EsTUFBTUUsT0FBTyxNQUFNdkIsT0FBT3dCLE9BQU8sQ0FBQztJQUNsQyxJQUFJLENBQUNiLFFBQVEsR0FBRyxNQUFNWCxPQUFPeUIsSUFBSSxDQUFDLElBQUksQ0FBQ2QsUUFBUSxFQUFFWTtJQUNqREY7QUFDRjtBQUVBLDZCQUE2QjtBQUM3QnBCLFdBQVd5QixPQUFPLENBQUNDLGVBQWUsR0FBRyxlQUFnQkMsaUJBQWlCO0lBQ3BFLE9BQU8sTUFBTTVCLE9BQU82QixPQUFPLENBQUNELG1CQUFtQixJQUFJLENBQUNqQixRQUFRO0FBQzlEO0FBRUEsbUNBQW1DO0FBQ25DVixXQUFXeUIsT0FBTyxDQUFDSSxNQUFNLEdBQUc7SUFDMUIsTUFBTUMsYUFBYSxJQUFJLENBQUNDLFFBQVE7SUFDaEMsT0FBT0QsV0FBV3BCLFFBQVE7SUFDMUIsT0FBT29CO0FBQ1Q7QUFFQUUsT0FBT0MsT0FBTyxHQUFHcEMsU0FBU3FDLE1BQU0sQ0FBQ0MsSUFBSSxJQUFJdEMsU0FBU3VDLEtBQUssQ0FBQyxRQUFRcEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0LXJlYWx0aW1lLWNoYXQvLi9tb2RlbHMvVXNlci5qcz83MzY3Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJyk7XG5cbmNvbnN0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgdXNlcm5hbWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1VzZXJuYW1lIGlzIHJlcXVpcmVkJ10sXG4gICAgICB1bmlxdWU6IHRydWUsXG4gICAgICB0cmltOiB0cnVlLFxuICAgICAgbWlubGVuZ3RoOiBbMywgJ1VzZXJuYW1lIG11c3QgYmUgYXQgbGVhc3QgMyBjaGFyYWN0ZXJzJ10sXG4gICAgICBtYXhsZW5ndGg6IFszMCwgJ1VzZXJuYW1lIGNhbm5vdCBleGNlZWQgMzAgY2hhcmFjdGVycyddLFxuICAgIH0sXG4gICAgcGFzc3dvcmQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1Bhc3N3b3JkIGlzIHJlcXVpcmVkJ10sXG4gICAgICBtaW5sZW5ndGg6IFs2LCAnUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA2IGNoYXJhY3RlcnMnXSxcbiAgICAgIHNlbGVjdDogZmFsc2UsIC8vIERvbid0IGluY2x1ZGUgcGFzc3dvcmQgaW4gcXVlcmllcyBieSBkZWZhdWx0XG4gICAgfSxcbiAgICBzdGF0dXM6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGVudW06IFsnb25saW5lJywgJ29mZmxpbmUnXSxcbiAgICAgIGRlZmF1bHQ6ICdvZmZsaW5lJyxcbiAgICB9LFxuICAgIGxhc3RTZWVuOiB7XG4gICAgICB0eXBlOiBEYXRlLFxuICAgICAgZGVmYXVsdDogRGF0ZS5ub3csXG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gIH1cbik7XG5cbi8vIEhhc2ggcGFzc3dvcmQgYmVmb3JlIHNhdmluZ1xudXNlclNjaGVtYS5wcmUoJ3NhdmUnLCBhc3luYyBmdW5jdGlvbiAobmV4dCkge1xuICBpZiAoIXRoaXMuaXNNb2RpZmllZCgncGFzc3dvcmQnKSkge1xuICAgIHJldHVybiBuZXh0KCk7XG4gIH1cbiAgY29uc3Qgc2FsdCA9IGF3YWl0IGJjcnlwdC5nZW5TYWx0KDEwKTtcbiAgdGhpcy5wYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHRoaXMucGFzc3dvcmQsIHNhbHQpO1xuICBuZXh0KCk7XG59KTtcblxuLy8gTWV0aG9kIHRvIGNvbXBhcmUgcGFzc3dvcmRcbnVzZXJTY2hlbWEubWV0aG9kcy5jb21wYXJlUGFzc3dvcmQgPSBhc3luYyBmdW5jdGlvbiAoY2FuZGlkYXRlUGFzc3dvcmQpIHtcbiAgcmV0dXJuIGF3YWl0IGJjcnlwdC5jb21wYXJlKGNhbmRpZGF0ZVBhc3N3b3JkLCB0aGlzLnBhc3N3b3JkKTtcbn07XG5cbi8vIFJlbW92ZSBwYXNzd29yZCBmcm9tIEpTT04gb3V0cHV0XG51c2VyU2NoZW1hLm1ldGhvZHMudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICBjb25zdCB1c2VyT2JqZWN0ID0gdGhpcy50b09iamVjdCgpO1xuICBkZWxldGUgdXNlck9iamVjdC5wYXNzd29yZDtcbiAgcmV0dXJuIHVzZXJPYmplY3Q7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IG1vbmdvb3NlLm1vZGVscy5Vc2VyIHx8IG1vbmdvb3NlLm1vZGVsKCdVc2VyJywgdXNlclNjaGVtYSk7XG5cbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJiY3J5cHQiLCJ1c2VyU2NoZW1hIiwiU2NoZW1hIiwidXNlcm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ1bmlxdWUiLCJ0cmltIiwibWlubGVuZ3RoIiwibWF4bGVuZ3RoIiwicGFzc3dvcmQiLCJzZWxlY3QiLCJzdGF0dXMiLCJlbnVtIiwiZGVmYXVsdCIsImxhc3RTZWVuIiwiRGF0ZSIsIm5vdyIsInRpbWVzdGFtcHMiLCJwcmUiLCJuZXh0IiwiaXNNb2RpZmllZCIsInNhbHQiLCJnZW5TYWx0IiwiaGFzaCIsIm1ldGhvZHMiLCJjb21wYXJlUGFzc3dvcmQiLCJjYW5kaWRhdGVQYXNzd29yZCIsImNvbXBhcmUiLCJ0b0pTT04iLCJ1c2VyT2JqZWN0IiwidG9PYmplY3QiLCJtb2R1bGUiLCJleHBvcnRzIiwibW9kZWxzIiwiVXNlciIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./models/User.js\n");

/***/ }),

/***/ "(api)/./pages/api/socketio.js":
/*!*******************************!*\
  !*** ./pages/api/socketio.js ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var socket_io__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! socket.io */ \"socket.io\");\n/* harmony import */ var _lib_mongoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/mongoose */ \"(api)/./lib/mongoose.js\");\n/* harmony import */ var _lib_mongoose__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_lib_mongoose__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _socket_socketHandlers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/socket/socketHandlers */ \"(api)/./socket/socketHandlers.js\");\n/* harmony import */ var _socket_socketHandlers__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_socket_socketHandlers__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _middleware_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/middleware/auth */ \"(api)/./middleware/auth.js\");\n/* harmony import */ var _middleware_auth__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_middleware_auth__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([socket_io__WEBPACK_IMPORTED_MODULE_0__]);\nsocket_io__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\nconst ioHandler = async (req, res)=>{\n    if (!res.socket.server.io) {\n        await _lib_mongoose__WEBPACK_IMPORTED_MODULE_1___default()();\n        const io = new socket_io__WEBPACK_IMPORTED_MODULE_0__.Server(res.socket.server, {\n            path: \"/api/socketio\",\n            cors: {\n                origin: process.env.CLIENT_URL || \"*\",\n                methods: [\n                    \"GET\",\n                    \"POST\"\n                ],\n                credentials: true\n            }\n        });\n        io.use(_middleware_auth__WEBPACK_IMPORTED_MODULE_3__.authenticateSocket);\n        (0,_socket_socketHandlers__WEBPACK_IMPORTED_MODULE_2__.initializeSocketHandlers)(io);\n        res.socket.server.io = io;\n    }\n    res.end();\n};\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ioHandler);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvc29ja2V0aW8uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQW1DO0FBQ0k7QUFDNEI7QUFDWjtBQUV2RCxNQUFNSSxZQUFZLE9BQU9DLEtBQUtDO0lBQzVCLElBQUksQ0FBQ0EsSUFBSUMsTUFBTSxDQUFDQyxNQUFNLENBQUNDLEVBQUUsRUFBRTtRQUN6QixNQUFNUixvREFBU0E7UUFDZixNQUFNUSxLQUFLLElBQUlULDZDQUFNQSxDQUFDTSxJQUFJQyxNQUFNLENBQUNDLE1BQU0sRUFBRTtZQUN2Q0UsTUFBTTtZQUNOQyxNQUFNO2dCQUNKQyxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLFVBQVUsSUFBSTtnQkFDbENDLFNBQVM7b0JBQUM7b0JBQU87aUJBQU87Z0JBQ3hCQyxhQUFhO1lBQ2Y7UUFDRjtRQUVBUixHQUFHUyxHQUFHLENBQUNmLGdFQUFrQkE7UUFDekJELGdGQUF3QkEsQ0FBQ087UUFDekJILElBQUlDLE1BQU0sQ0FBQ0MsTUFBTSxDQUFDQyxFQUFFLEdBQUdBO0lBQ3pCO0lBRUFILElBQUlhLEdBQUc7QUFDVDtBQUVPLE1BQU1DLFNBQVM7SUFDcEJDLEtBQUs7UUFDSEMsWUFBWTtJQUNkO0FBQ0YsRUFBRTtBQUVGLGlFQUFlbEIsU0FBU0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtcmVhbHRpbWUtY2hhdC8uL3BhZ2VzL2FwaS9zb2NrZXRpby5qcz9lZDU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlcnZlciB9IGZyb20gJ3NvY2tldC5pbyc7XG5pbXBvcnQgY29ubmVjdERCIGZyb20gJ0AvbGliL21vbmdvb3NlJztcbmltcG9ydCB7IGluaXRpYWxpemVTb2NrZXRIYW5kbGVycyB9IGZyb20gJ0Avc29ja2V0L3NvY2tldEhhbmRsZXJzJztcbmltcG9ydCB7IGF1dGhlbnRpY2F0ZVNvY2tldCB9IGZyb20gJ0AvbWlkZGxld2FyZS9hdXRoJztcblxuY29uc3QgaW9IYW5kbGVyID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGlmICghcmVzLnNvY2tldC5zZXJ2ZXIuaW8pIHtcbiAgICBhd2FpdCBjb25uZWN0REIoKTtcbiAgICBjb25zdCBpbyA9IG5ldyBTZXJ2ZXIocmVzLnNvY2tldC5zZXJ2ZXIsIHtcbiAgICAgIHBhdGg6ICcvYXBpL3NvY2tldGlvJyxcbiAgICAgIGNvcnM6IHtcbiAgICAgICAgb3JpZ2luOiBwcm9jZXNzLmVudi5DTElFTlRfVVJMIHx8ICcqJyxcbiAgICAgICAgbWV0aG9kczogWydHRVQnLCAnUE9TVCddLFxuICAgICAgICBjcmVkZW50aWFsczogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBpby51c2UoYXV0aGVudGljYXRlU29ja2V0KTtcbiAgICBpbml0aWFsaXplU29ja2V0SGFuZGxlcnMoaW8pO1xuICAgIHJlcy5zb2NrZXQuc2VydmVyLmlvID0gaW87XG4gIH1cblxuICByZXMuZW5kKCk7XG59O1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBhcGk6IHtcbiAgICBib2R5UGFyc2VyOiBmYWxzZSxcbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGlvSGFuZGxlcjtcblxuIl0sIm5hbWVzIjpbIlNlcnZlciIsImNvbm5lY3REQiIsImluaXRpYWxpemVTb2NrZXRIYW5kbGVycyIsImF1dGhlbnRpY2F0ZVNvY2tldCIsImlvSGFuZGxlciIsInJlcSIsInJlcyIsInNvY2tldCIsInNlcnZlciIsImlvIiwicGF0aCIsImNvcnMiLCJvcmlnaW4iLCJwcm9jZXNzIiwiZW52IiwiQ0xJRU5UX1VSTCIsIm1ldGhvZHMiLCJjcmVkZW50aWFscyIsInVzZSIsImVuZCIsImNvbmZpZyIsImFwaSIsImJvZHlQYXJzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/socketio.js\n");

/***/ }),

/***/ "(api)/./socket/socketHandlers.js":
/*!**********************************!*\
  !*** ./socket/socketHandlers.js ***!
  \**********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst Message = __webpack_require__(/*! ../models/Message */ \"(api)/./models/Message.js\");\nconst User = __webpack_require__(/*! ../models/User */ \"(api)/./models/User.js\");\nconst logger = __webpack_require__(/*! ../config/logger */ \"(api)/./config/logger.js\");\n// Store active users (userId -> socketId)\nconst activeUsers = new Map();\nconst initializeSocketHandlers = (io)=>{\n    // Handle connection\n    io.on(\"connection\", (socket)=>{\n        const userId = socket.userId;\n        const username = socket.username;\n        logger.info(`WebSocket event: connect - User: ${username} (${userId}), Socket: ${socket.id}`);\n        // Add user to active users\n        activeUsers.set(userId, socket.id);\n        // Update user status to online\n        User.findByIdAndUpdate(userId, {\n            status: \"online\",\n            lastSeen: new Date()\n        }).catch((err)=>logger.error(\"Error updating user status:\", err));\n        // Notify other users that this user is now online\n        socket.broadcast.emit(\"user_status_change\", {\n            userId,\n            username,\n            status: \"online\"\n        });\n        // Send list of online users with usernames to the newly connected user\n        (async ()=>{\n            try {\n                const onlineUserIds = Array.from(activeUsers.keys());\n                const onlineUsersData = await User.find({\n                    _id: {\n                        $in: onlineUserIds\n                    }\n                }).select(\"_id username\").lean();\n                socket.emit(\"online_users\", onlineUsersData.map((user)=>({\n                        userId: user._id.toString(),\n                        username: user.username\n                    })));\n            } catch (err) {\n                logger.error(\"Error fetching online users:\", err);\n                // Fallback to just IDs if there's an error\n                socket.emit(\"online_users\", Array.from(activeUsers.keys()));\n            }\n        })();\n        // Handle sending messages\n        socket.on(\"send_message\", async (data)=>{\n            try {\n                const { receiverId, content } = data;\n                if (!receiverId || !content) {\n                    socket.emit(\"error\", {\n                        message: \"Receiver ID and content are required\"\n                    });\n                    return;\n                }\n                logger.info(`WebSocket event: send_message - From: ${username} (${userId}), To: ${receiverId}, Content: ${content.substring(0, 50)}...`);\n                // Verify receiver exists\n                const receiver = await User.findById(receiverId);\n                if (!receiver) {\n                    socket.emit(\"error\", {\n                        message: \"Receiver not found\"\n                    });\n                    return;\n                }\n                // Create and save message\n                const message = new Message({\n                    sender: userId,\n                    receiver: receiverId,\n                    content\n                });\n                await message.save();\n                // Populate sender and receiver for response\n                await message.populate(\"sender\", \"username\");\n                await message.populate(\"receiver\", \"username\");\n                // Send message to receiver if online\n                const receiverSocketId = activeUsers.get(receiverId);\n                if (receiverSocketId) {\n                    io.to(receiverSocketId).emit(\"receive_message\", {\n                        message: message.toObject(),\n                        event: \"receive_message\"\n                    });\n                    logger.info(`WebSocket event: receive_message - To: ${receiver.username} (${receiverId})`);\n                }\n                // Confirm message sent to sender\n                socket.emit(\"message_sent\", {\n                    message: message.toObject(),\n                    event: \"message_sent\"\n                });\n                logger.info(`Message sent successfully: ${userId} -> ${receiverId}`);\n            } catch (error) {\n                logger.error(\"Error sending message:\", error);\n                socket.emit(\"error\", {\n                    message: \"Failed to send message\"\n                });\n            }\n        });\n        // Handle typing indicator\n        socket.on(\"typing\", (data)=>{\n            const { receiverId, isTyping } = data;\n            const receiverSocketId = activeUsers.get(receiverId);\n            if (receiverSocketId) {\n                io.to(receiverSocketId).emit(\"user_typing\", {\n                    userId,\n                    username,\n                    isTyping\n                });\n            }\n        });\n        // Handle disconnect\n        socket.on(\"disconnect\", async ()=>{\n            logger.info(`WebSocket event: disconnect - User: ${username} (${userId}), Socket: ${socket.id}`);\n            // Remove user from active users\n            activeUsers.delete(userId);\n            // Update user status to offline\n            try {\n                await User.findByIdAndUpdate(userId, {\n                    status: \"offline\",\n                    lastSeen: new Date()\n                });\n                // Notify other users that this user is now offline\n                socket.broadcast.emit(\"user_status_change\", {\n                    userId,\n                    username,\n                    status: \"offline\"\n                });\n            } catch (error) {\n                logger.error(\"Error updating user status on disconnect:\", error);\n            }\n        });\n    });\n};\nmodule.exports = {\n    initializeSocketHandlers,\n    activeUsers\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zb2NrZXQvc29ja2V0SGFuZGxlcnMuanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU1BLFVBQVVDLG1CQUFPQSxDQUFDO0FBQ3hCLE1BQU1DLE9BQU9ELG1CQUFPQSxDQUFDO0FBQ3JCLE1BQU1FLFNBQVNGLG1CQUFPQSxDQUFDO0FBRXZCLDBDQUEwQztBQUMxQyxNQUFNRyxjQUFjLElBQUlDO0FBRXhCLE1BQU1DLDJCQUEyQixDQUFDQztJQUNoQyxvQkFBb0I7SUFDcEJBLEdBQUdDLEVBQUUsQ0FBQyxjQUFjLENBQUNDO1FBQ25CLE1BQU1DLFNBQVNELE9BQU9DLE1BQU07UUFDNUIsTUFBTUMsV0FBV0YsT0FBT0UsUUFBUTtRQUVoQ1IsT0FBT1MsSUFBSSxDQUFDLENBQUMsaUNBQWlDLEVBQUVELFNBQVMsRUFBRSxFQUFFRCxPQUFPLFdBQVcsRUFBRUQsT0FBT0ksRUFBRSxDQUFDLENBQUM7UUFFNUYsMkJBQTJCO1FBQzNCVCxZQUFZVSxHQUFHLENBQUNKLFFBQVFELE9BQU9JLEVBQUU7UUFFakMsK0JBQStCO1FBQy9CWCxLQUFLYSxpQkFBaUIsQ0FBQ0wsUUFBUTtZQUM3Qk0sUUFBUTtZQUNSQyxVQUFVLElBQUlDO1FBQ2hCLEdBQUdDLEtBQUssQ0FBQyxDQUFDQyxNQUFRakIsT0FBT2tCLEtBQUssQ0FBQywrQkFBK0JEO1FBRTlELGtEQUFrRDtRQUNsRFgsT0FBT2EsU0FBUyxDQUFDQyxJQUFJLENBQUMsc0JBQXNCO1lBQzFDYjtZQUNBQztZQUNBSyxRQUFRO1FBQ1Y7UUFFQSx1RUFBdUU7UUFDdEU7WUFDQyxJQUFJO2dCQUNGLE1BQU1RLGdCQUFnQkMsTUFBTUMsSUFBSSxDQUFDdEIsWUFBWXVCLElBQUk7Z0JBQ2pELE1BQU1DLGtCQUFrQixNQUFNMUIsS0FBSzJCLElBQUksQ0FBQztvQkFBRUMsS0FBSzt3QkFBRUMsS0FBS1A7b0JBQWM7Z0JBQUUsR0FDbkVRLE1BQU0sQ0FBQyxnQkFDUEMsSUFBSTtnQkFDUHhCLE9BQU9jLElBQUksQ0FBQyxnQkFBZ0JLLGdCQUFnQk0sR0FBRyxDQUFDQyxDQUFBQSxPQUFTO3dCQUN2RHpCLFFBQVF5QixLQUFLTCxHQUFHLENBQUNNLFFBQVE7d0JBQ3pCekIsVUFBVXdCLEtBQUt4QixRQUFRO29CQUN6QjtZQUNGLEVBQUUsT0FBT1MsS0FBSztnQkFDWmpCLE9BQU9rQixLQUFLLENBQUMsZ0NBQWdDRDtnQkFDN0MsMkNBQTJDO2dCQUMzQ1gsT0FBT2MsSUFBSSxDQUFDLGdCQUFnQkUsTUFBTUMsSUFBSSxDQUFDdEIsWUFBWXVCLElBQUk7WUFDekQ7UUFDRjtRQUVBLDBCQUEwQjtRQUMxQmxCLE9BQU9ELEVBQUUsQ0FBQyxnQkFBZ0IsT0FBTzZCO1lBQy9CLElBQUk7Z0JBQ0YsTUFBTSxFQUFFQyxVQUFVLEVBQUVDLE9BQU8sRUFBRSxHQUFHRjtnQkFFaEMsSUFBSSxDQUFDQyxjQUFjLENBQUNDLFNBQVM7b0JBQzNCOUIsT0FBT2MsSUFBSSxDQUFDLFNBQVM7d0JBQUVpQixTQUFTO29CQUF1QztvQkFDdkU7Z0JBQ0Y7Z0JBRUFyQyxPQUFPUyxJQUFJLENBQUMsQ0FBQyxzQ0FBc0MsRUFBRUQsU0FBUyxFQUFFLEVBQUVELE9BQU8sT0FBTyxFQUFFNEIsV0FBVyxXQUFXLEVBQUVDLFFBQVFFLFNBQVMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDO2dCQUV2SSx5QkFBeUI7Z0JBQ3pCLE1BQU1DLFdBQVcsTUFBTXhDLEtBQUt5QyxRQUFRLENBQUNMO2dCQUNyQyxJQUFJLENBQUNJLFVBQVU7b0JBQ2JqQyxPQUFPYyxJQUFJLENBQUMsU0FBUzt3QkFBRWlCLFNBQVM7b0JBQXFCO29CQUNyRDtnQkFDRjtnQkFFQSwwQkFBMEI7Z0JBQzFCLE1BQU1BLFVBQVUsSUFBSXhDLFFBQVE7b0JBQzFCNEMsUUFBUWxDO29CQUNSZ0MsVUFBVUo7b0JBQ1ZDO2dCQUNGO2dCQUNBLE1BQU1DLFFBQVFLLElBQUk7Z0JBRWxCLDRDQUE0QztnQkFDNUMsTUFBTUwsUUFBUU0sUUFBUSxDQUFDLFVBQVU7Z0JBQ2pDLE1BQU1OLFFBQVFNLFFBQVEsQ0FBQyxZQUFZO2dCQUVuQyxxQ0FBcUM7Z0JBQ3JDLE1BQU1DLG1CQUFtQjNDLFlBQVk0QyxHQUFHLENBQUNWO2dCQUN6QyxJQUFJUyxrQkFBa0I7b0JBQ3BCeEMsR0FBRzBDLEVBQUUsQ0FBQ0Ysa0JBQWtCeEIsSUFBSSxDQUFDLG1CQUFtQjt3QkFDOUNpQixTQUFTQSxRQUFRVSxRQUFRO3dCQUN6QkMsT0FBTztvQkFDVDtvQkFDQWhELE9BQU9TLElBQUksQ0FBQyxDQUFDLHVDQUF1QyxFQUFFOEIsU0FBUy9CLFFBQVEsQ0FBQyxFQUFFLEVBQUUyQixXQUFXLENBQUMsQ0FBQztnQkFDM0Y7Z0JBRUEsaUNBQWlDO2dCQUNqQzdCLE9BQU9jLElBQUksQ0FBQyxnQkFBZ0I7b0JBQzFCaUIsU0FBU0EsUUFBUVUsUUFBUTtvQkFDekJDLE9BQU87Z0JBQ1Q7Z0JBRUFoRCxPQUFPUyxJQUFJLENBQUMsQ0FBQywyQkFBMkIsRUFBRUYsT0FBTyxJQUFJLEVBQUU0QixXQUFXLENBQUM7WUFDckUsRUFBRSxPQUFPakIsT0FBTztnQkFDZGxCLE9BQU9rQixLQUFLLENBQUMsMEJBQTBCQTtnQkFDdkNaLE9BQU9jLElBQUksQ0FBQyxTQUFTO29CQUFFaUIsU0FBUztnQkFBeUI7WUFDM0Q7UUFDRjtRQUVBLDBCQUEwQjtRQUMxQi9CLE9BQU9ELEVBQUUsQ0FBQyxVQUFVLENBQUM2QjtZQUNuQixNQUFNLEVBQUVDLFVBQVUsRUFBRWMsUUFBUSxFQUFFLEdBQUdmO1lBQ2pDLE1BQU1VLG1CQUFtQjNDLFlBQVk0QyxHQUFHLENBQUNWO1lBQ3pDLElBQUlTLGtCQUFrQjtnQkFDcEJ4QyxHQUFHMEMsRUFBRSxDQUFDRixrQkFBa0J4QixJQUFJLENBQUMsZUFBZTtvQkFDMUNiO29CQUNBQztvQkFDQXlDO2dCQUNGO1lBQ0Y7UUFDRjtRQUVBLG9CQUFvQjtRQUNwQjNDLE9BQU9ELEVBQUUsQ0FBQyxjQUFjO1lBQ3RCTCxPQUFPUyxJQUFJLENBQUMsQ0FBQyxvQ0FBb0MsRUFBRUQsU0FBUyxFQUFFLEVBQUVELE9BQU8sV0FBVyxFQUFFRCxPQUFPSSxFQUFFLENBQUMsQ0FBQztZQUUvRixnQ0FBZ0M7WUFDaENULFlBQVlpRCxNQUFNLENBQUMzQztZQUVuQixnQ0FBZ0M7WUFDaEMsSUFBSTtnQkFDRixNQUFNUixLQUFLYSxpQkFBaUIsQ0FBQ0wsUUFBUTtvQkFDbkNNLFFBQVE7b0JBQ1JDLFVBQVUsSUFBSUM7Z0JBQ2hCO2dCQUVBLG1EQUFtRDtnQkFDbkRULE9BQU9hLFNBQVMsQ0FBQ0MsSUFBSSxDQUFDLHNCQUFzQjtvQkFDMUNiO29CQUNBQztvQkFDQUssUUFBUTtnQkFDVjtZQUNGLEVBQUUsT0FBT0ssT0FBTztnQkFDZGxCLE9BQU9rQixLQUFLLENBQUMsNkNBQTZDQTtZQUM1RDtRQUNGO0lBQ0Y7QUFDRjtBQUVBaUMsT0FBT0MsT0FBTyxHQUFHO0lBQUVqRDtJQUEwQkY7QUFBWSIsInNvdXJjZXMiOlsid2VicGFjazovL25leHQtcmVhbHRpbWUtY2hhdC8uL3NvY2tldC9zb2NrZXRIYW5kbGVycy5qcz83ZTU4Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IE1lc3NhZ2UgPSByZXF1aXJlKCcuLi9tb2RlbHMvTWVzc2FnZScpO1xuY29uc3QgVXNlciA9IHJlcXVpcmUoJy4uL21vZGVscy9Vc2VyJyk7XG5jb25zdCBsb2dnZXIgPSByZXF1aXJlKCcuLi9jb25maWcvbG9nZ2VyJyk7XG5cbi8vIFN0b3JlIGFjdGl2ZSB1c2VycyAodXNlcklkIC0+IHNvY2tldElkKVxuY29uc3QgYWN0aXZlVXNlcnMgPSBuZXcgTWFwKCk7XG5cbmNvbnN0IGluaXRpYWxpemVTb2NrZXRIYW5kbGVycyA9IChpbykgPT4ge1xuICAvLyBIYW5kbGUgY29ubmVjdGlvblxuICBpby5vbignY29ubmVjdGlvbicsIChzb2NrZXQpID0+IHtcbiAgICBjb25zdCB1c2VySWQgPSBzb2NrZXQudXNlcklkO1xuICAgIGNvbnN0IHVzZXJuYW1lID0gc29ja2V0LnVzZXJuYW1lO1xuXG4gICAgbG9nZ2VyLmluZm8oYFdlYlNvY2tldCBldmVudDogY29ubmVjdCAtIFVzZXI6ICR7dXNlcm5hbWV9ICgke3VzZXJJZH0pLCBTb2NrZXQ6ICR7c29ja2V0LmlkfWApO1xuXG4gICAgLy8gQWRkIHVzZXIgdG8gYWN0aXZlIHVzZXJzXG4gICAgYWN0aXZlVXNlcnMuc2V0KHVzZXJJZCwgc29ja2V0LmlkKTtcblxuICAgIC8vIFVwZGF0ZSB1c2VyIHN0YXR1cyB0byBvbmxpbmVcbiAgICBVc2VyLmZpbmRCeUlkQW5kVXBkYXRlKHVzZXJJZCwge1xuICAgICAgc3RhdHVzOiAnb25saW5lJyxcbiAgICAgIGxhc3RTZWVuOiBuZXcgRGF0ZSgpLFxuICAgIH0pLmNhdGNoKChlcnIpID0+IGxvZ2dlci5lcnJvcignRXJyb3IgdXBkYXRpbmcgdXNlciBzdGF0dXM6JywgZXJyKSk7XG5cbiAgICAvLyBOb3RpZnkgb3RoZXIgdXNlcnMgdGhhdCB0aGlzIHVzZXIgaXMgbm93IG9ubGluZVxuICAgIHNvY2tldC5icm9hZGNhc3QuZW1pdCgndXNlcl9zdGF0dXNfY2hhbmdlJywge1xuICAgICAgdXNlcklkLFxuICAgICAgdXNlcm5hbWUsXG4gICAgICBzdGF0dXM6ICdvbmxpbmUnLFxuICAgIH0pO1xuXG4gICAgLy8gU2VuZCBsaXN0IG9mIG9ubGluZSB1c2VycyB3aXRoIHVzZXJuYW1lcyB0byB0aGUgbmV3bHkgY29ubmVjdGVkIHVzZXJcbiAgICAoYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgb25saW5lVXNlcklkcyA9IEFycmF5LmZyb20oYWN0aXZlVXNlcnMua2V5cygpKTtcbiAgICAgICAgY29uc3Qgb25saW5lVXNlcnNEYXRhID0gYXdhaXQgVXNlci5maW5kKHsgX2lkOiB7ICRpbjogb25saW5lVXNlcklkcyB9IH0pXG4gICAgICAgICAgLnNlbGVjdCgnX2lkIHVzZXJuYW1lJylcbiAgICAgICAgICAubGVhbigpO1xuICAgICAgICBzb2NrZXQuZW1pdCgnb25saW5lX3VzZXJzJywgb25saW5lVXNlcnNEYXRhLm1hcCh1c2VyID0+ICh7XG4gICAgICAgICAgdXNlcklkOiB1c2VyLl9pZC50b1N0cmluZygpLFxuICAgICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lXG4gICAgICAgIH0pKSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBmZXRjaGluZyBvbmxpbmUgdXNlcnM6JywgZXJyKTtcbiAgICAgICAgLy8gRmFsbGJhY2sgdG8ganVzdCBJRHMgaWYgdGhlcmUncyBhbiBlcnJvclxuICAgICAgICBzb2NrZXQuZW1pdCgnb25saW5lX3VzZXJzJywgQXJyYXkuZnJvbShhY3RpdmVVc2Vycy5rZXlzKCkpKTtcbiAgICAgIH1cbiAgICB9KSgpO1xuXG4gICAgLy8gSGFuZGxlIHNlbmRpbmcgbWVzc2FnZXNcbiAgICBzb2NrZXQub24oJ3NlbmRfbWVzc2FnZScsIGFzeW5jIChkYXRhKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB7IHJlY2VpdmVySWQsIGNvbnRlbnQgfSA9IGRhdGE7XG5cbiAgICAgICAgaWYgKCFyZWNlaXZlcklkIHx8ICFjb250ZW50KSB7XG4gICAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywgeyBtZXNzYWdlOiAnUmVjZWl2ZXIgSUQgYW5kIGNvbnRlbnQgYXJlIHJlcXVpcmVkJyB9KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsb2dnZXIuaW5mbyhgV2ViU29ja2V0IGV2ZW50OiBzZW5kX21lc3NhZ2UgLSBGcm9tOiAke3VzZXJuYW1lfSAoJHt1c2VySWR9KSwgVG86ICR7cmVjZWl2ZXJJZH0sIENvbnRlbnQ6ICR7Y29udGVudC5zdWJzdHJpbmcoMCwgNTApfS4uLmApO1xuXG4gICAgICAgIC8vIFZlcmlmeSByZWNlaXZlciBleGlzdHNcbiAgICAgICAgY29uc3QgcmVjZWl2ZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHJlY2VpdmVySWQpO1xuICAgICAgICBpZiAoIXJlY2VpdmVyKSB7XG4gICAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywgeyBtZXNzYWdlOiAnUmVjZWl2ZXIgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgYW5kIHNhdmUgbWVzc2FnZVxuICAgICAgICBjb25zdCBtZXNzYWdlID0gbmV3IE1lc3NhZ2Uoe1xuICAgICAgICAgIHNlbmRlcjogdXNlcklkLFxuICAgICAgICAgIHJlY2VpdmVyOiByZWNlaXZlcklkLFxuICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBtZXNzYWdlLnNhdmUoKTtcblxuICAgICAgICAvLyBQb3B1bGF0ZSBzZW5kZXIgYW5kIHJlY2VpdmVyIGZvciByZXNwb25zZVxuICAgICAgICBhd2FpdCBtZXNzYWdlLnBvcHVsYXRlKCdzZW5kZXInLCAndXNlcm5hbWUnKTtcbiAgICAgICAgYXdhaXQgbWVzc2FnZS5wb3B1bGF0ZSgncmVjZWl2ZXInLCAndXNlcm5hbWUnKTtcblxuICAgICAgICAvLyBTZW5kIG1lc3NhZ2UgdG8gcmVjZWl2ZXIgaWYgb25saW5lXG4gICAgICAgIGNvbnN0IHJlY2VpdmVyU29ja2V0SWQgPSBhY3RpdmVVc2Vycy5nZXQocmVjZWl2ZXJJZCk7XG4gICAgICAgIGlmIChyZWNlaXZlclNvY2tldElkKSB7XG4gICAgICAgICAgaW8udG8ocmVjZWl2ZXJTb2NrZXRJZCkuZW1pdCgncmVjZWl2ZV9tZXNzYWdlJywge1xuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZS50b09iamVjdCgpLFxuICAgICAgICAgICAgZXZlbnQ6ICdyZWNlaXZlX21lc3NhZ2UnLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGxvZ2dlci5pbmZvKGBXZWJTb2NrZXQgZXZlbnQ6IHJlY2VpdmVfbWVzc2FnZSAtIFRvOiAke3JlY2VpdmVyLnVzZXJuYW1lfSAoJHtyZWNlaXZlcklkfSlgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENvbmZpcm0gbWVzc2FnZSBzZW50IHRvIHNlbmRlclxuICAgICAgICBzb2NrZXQuZW1pdCgnbWVzc2FnZV9zZW50Jywge1xuICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UudG9PYmplY3QoKSxcbiAgICAgICAgICBldmVudDogJ21lc3NhZ2Vfc2VudCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxvZ2dlci5pbmZvKGBNZXNzYWdlIHNlbnQgc3VjY2Vzc2Z1bGx5OiAke3VzZXJJZH0gLT4gJHtyZWNlaXZlcklkfWApO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBzZW5kaW5nIG1lc3NhZ2U6JywgZXJyb3IpO1xuICAgICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gc2VuZCBtZXNzYWdlJyB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEhhbmRsZSB0eXBpbmcgaW5kaWNhdG9yXG4gICAgc29ja2V0Lm9uKCd0eXBpbmcnLCAoZGF0YSkgPT4ge1xuICAgICAgY29uc3QgeyByZWNlaXZlcklkLCBpc1R5cGluZyB9ID0gZGF0YTtcbiAgICAgIGNvbnN0IHJlY2VpdmVyU29ja2V0SWQgPSBhY3RpdmVVc2Vycy5nZXQocmVjZWl2ZXJJZCk7XG4gICAgICBpZiAocmVjZWl2ZXJTb2NrZXRJZCkge1xuICAgICAgICBpby50byhyZWNlaXZlclNvY2tldElkKS5lbWl0KCd1c2VyX3R5cGluZycsIHtcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgdXNlcm5hbWUsXG4gICAgICAgICAgaXNUeXBpbmcsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gSGFuZGxlIGRpc2Nvbm5lY3RcbiAgICBzb2NrZXQub24oJ2Rpc2Nvbm5lY3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsb2dnZXIuaW5mbyhgV2ViU29ja2V0IGV2ZW50OiBkaXNjb25uZWN0IC0gVXNlcjogJHt1c2VybmFtZX0gKCR7dXNlcklkfSksIFNvY2tldDogJHtzb2NrZXQuaWR9YCk7XG5cbiAgICAgIC8vIFJlbW92ZSB1c2VyIGZyb20gYWN0aXZlIHVzZXJzXG4gICAgICBhY3RpdmVVc2Vycy5kZWxldGUodXNlcklkKTtcblxuICAgICAgLy8gVXBkYXRlIHVzZXIgc3RhdHVzIHRvIG9mZmxpbmVcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUodXNlcklkLCB7XG4gICAgICAgICAgc3RhdHVzOiAnb2ZmbGluZScsXG4gICAgICAgICAgbGFzdFNlZW46IG5ldyBEYXRlKCksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE5vdGlmeSBvdGhlciB1c2VycyB0aGF0IHRoaXMgdXNlciBpcyBub3cgb2ZmbGluZVxuICAgICAgICBzb2NrZXQuYnJvYWRjYXN0LmVtaXQoJ3VzZXJfc3RhdHVzX2NoYW5nZScsIHtcbiAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgdXNlcm5hbWUsXG4gICAgICAgICAgc3RhdHVzOiAnb2ZmbGluZScsXG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciB1cGRhdGluZyB1c2VyIHN0YXR1cyBvbiBkaXNjb25uZWN0OicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHsgaW5pdGlhbGl6ZVNvY2tldEhhbmRsZXJzLCBhY3RpdmVVc2VycyB9O1xuXG4iXSwibmFtZXMiOlsiTWVzc2FnZSIsInJlcXVpcmUiLCJVc2VyIiwibG9nZ2VyIiwiYWN0aXZlVXNlcnMiLCJNYXAiLCJpbml0aWFsaXplU29ja2V0SGFuZGxlcnMiLCJpbyIsIm9uIiwic29ja2V0IiwidXNlcklkIiwidXNlcm5hbWUiLCJpbmZvIiwiaWQiLCJzZXQiLCJmaW5kQnlJZEFuZFVwZGF0ZSIsInN0YXR1cyIsImxhc3RTZWVuIiwiRGF0ZSIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJicm9hZGNhc3QiLCJlbWl0Iiwib25saW5lVXNlcklkcyIsIkFycmF5IiwiZnJvbSIsImtleXMiLCJvbmxpbmVVc2Vyc0RhdGEiLCJmaW5kIiwiX2lkIiwiJGluIiwic2VsZWN0IiwibGVhbiIsIm1hcCIsInVzZXIiLCJ0b1N0cmluZyIsImRhdGEiLCJyZWNlaXZlcklkIiwiY29udGVudCIsIm1lc3NhZ2UiLCJzdWJzdHJpbmciLCJyZWNlaXZlciIsImZpbmRCeUlkIiwic2VuZGVyIiwic2F2ZSIsInBvcHVsYXRlIiwicmVjZWl2ZXJTb2NrZXRJZCIsImdldCIsInRvIiwidG9PYmplY3QiLCJldmVudCIsImlzVHlwaW5nIiwiZGVsZXRlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./socket/socketHandlers.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsocketio&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsocketio.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();